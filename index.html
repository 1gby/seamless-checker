<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rudeboy‚Ñ¢ Seamless Pattern Checker</title>
<style>
* { box-sizing: border-box; }
body { 
  margin:0; 
  padding:0; 
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%);
  color:#eee;
  min-height: 100vh;
}

#container {
display:flex;
flex-direction:column;
min-height: 100vh;
}

#header {
padding: 1.5rem 2rem;
background: rgba(26, 26, 46, 0.8);
backdrop-filter: blur(10px);
border-bottom: 1px solid rgba(255, 255, 255, 0.1);
display: flex;
align-items: center;
justify-content: space-between;
gap: 1rem;
flex-wrap: wrap;
}

.logo-section {
display: flex;
align-items: center;
gap: 1rem;
}

#logo {
height: 42px;
width: auto;
cursor: pointer;
transition: transform 0.3s ease;
}

#logo:hover { transform: scale(1.05); }

.title {
font-size: 1.5rem;
font-weight: 700;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
margin: 0;
}

.file-upload-section {
display: flex;
align-items: center;
gap: 0.8rem;
}

.file-input-wrapper {
position: relative;
overflow: hidden;
display: inline-block;
}

.file-input-wrapper input[type=file] {
position: absolute;
left: -9999px;
}

.upload-btn {
padding: 0.75rem 1.5rem;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
border-radius: 12px;
font-size: 0.95rem;
font-weight: 600;
cursor: pointer;
transition: all 0.3s ease;
box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.upload-btn:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

#canvas-wrapper {
flex: 1;
display: flex;
align-items: center;
justify-content: center;
padding: 2rem;
position: relative;
}

#canvas {
max-width: 800px;
width: 100%;
aspect-ratio: 1;
border-radius: 20px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
cursor: pointer;
transition: all 0.3s ease;
}

#canvas.has-image { cursor: grab; }
#canvas.has-image:active { cursor: grabbing; }
#canvas:hover { box-shadow: 0 25px 70px rgba(0, 0, 0, 0.6); }

.empty-state {
position: absolute;
top: 50%;
left: 50%;
transform: translate(-50%, -50%);
text-align: center;
pointer-events: none;
opacity: 0;
transition: opacity 0.3s ease;
}

.empty-state.visible { opacity: 1; }

.empty-state-icon {
font-size: 4rem;
margin-bottom: 1rem;
opacity: 0.6;
}

.empty-state-text {
font-size: 1.25rem;
font-weight: 600;
margin-bottom: 0.5rem;
color: #888;
}

.empty-state-subtext {
font-size: 0.95rem;
color: #666;
}

#controls {
padding: 2rem;
background: rgba(26, 26, 46, 0.8);
backdrop-filter: blur(10px);
border-top: 1px solid rgba(255, 255, 255, 0.1);
display: flex;
gap: 1.5rem;
justify-content: center;
flex-wrap: wrap;
align-items: center;
}

.control-group {
display: flex;
flex-direction: column;
gap: 0.5rem;
min-width: 180px;
}

.control-label {
font-size: 0.85rem;
font-weight: 600;
color: #aaa;
text-transform: uppercase;
letter-spacing: 0.5px;
}

select, button {
padding: 0.75rem 1rem;
font-size: 0.95rem;
border-radius: 12px;
border: 1px solid rgba(255, 255, 255, 0.1);
background: rgba(255, 255, 255, 0.05);
color: #eee;
cursor: pointer;
transition: all 0.3s ease;
font-family: inherit;
}

select:hover, button:hover {
background: rgba(255, 255, 255, 0.1);
border-color: rgba(102, 126, 234, 0.5);
}

select:focus, button:focus {
outline: none;
border-color: #667eea;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
}

button.primary {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
border: none;
font-weight: 600;
box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

button.primary:hover {
transform: translateY(-2px);
box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

.slider-group {
display: flex;
flex-direction: column;
gap: 0.5rem;
min-width: 180px;
}

.slider-header {
display: flex;
justify-content: space-between;
align-items: center;
}

input[type=‚Äúrange‚Äù] {
width: 100%;
height: 6px;
border-radius: 3px;
background: rgba(255, 255, 255, 0.1);
outline: none;
-webkit-appearance: none;
}

input[type=‚Äúrange‚Äù]::-webkit-slider-thumb {
-webkit-appearance: none;
appearance: none;
width: 18px;
height: 18px;
border-radius: 50%;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
cursor: pointer;
box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
transition: all 0.3s ease;
}

input[type=‚Äúrange‚Äù]::-webkit-slider-thumb:hover { transform: scale(1.2); }

input[type=‚Äúrange‚Äù]::-moz-range-thumb {
width: 18px;
height: 18px;
border-radius: 50%;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
cursor: pointer;
border: none;
box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
transition: all 0.3s ease;
}

input[type=‚Äúrange‚Äù]::-moz-range-thumb:hover { transform: scale(1.2); }

.slider-value {
font-size: 0.9rem;
font-weight: 600;
color: #667eea;
min-width: 45px;
text-align: right;
}

#footer {
padding: 2rem;
background: rgba(10, 10, 10, 0.9);
border-top: 1px solid rgba(255, 255, 255, 0.1);
}

.footer-content {
max-width: 1200px;
margin: 0 auto;
text-align: center;
}

.footer-title {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 1rem;
color: #aaa;
}

.footer-links {
display: flex;
flex-wrap: wrap;
gap: 1.5rem;
justify-content: center;
margin-bottom: 1.5rem;
}

.footer-links a {
color: #667eea;
text-decoration: none;
font-size: 0.95rem;
transition: all 0.3s ease;
padding: 0.5rem 1rem;
border-radius: 8px;
background: rgba(102, 126, 234, 0.1);
}

.footer-links a:hover {
background: rgba(102, 126, 234, 0.2);
transform: translateY(-2px);
}

.footer-credit {
margin-top: 1.5rem;
padding-top: 1.5rem;
border-top: 1px solid rgba(255, 255, 255, 0.1);
font-weight: 700;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
font-size: 1.1rem;
}

.helper-text {
font-size: 0.85rem;
color: #888;
text-align: center;
margin-top: 1rem;
}

@media (max-width: 768px) {
#header { padding: 1rem; }
.title { font-size: 1.2rem; }
#canvas-wrapper { padding: 1rem; }
#controls { padding: 1.5rem 1rem; gap: 1rem; }
.control-group, .slider-group { min-width: 140px; }
}
</style>

</head>
<body>
<div id="container">
  <div id="header">
    <div class="logo-section">
      <img id="logo" src="https://i.imgur.com/tlVfJ54.png" alt="Rud3boy Logo">
      <h1 class="title">Rudeboy's Seamless Pattern Checker</h1>
    </div>
    <div class="file-upload-section">
      <div class="file-input-wrapper">
        <input type="file" id="fileInput" accept="image/*">
        <button class="upload-btn" id="uploadBtnHeader">üìÅ Upload Pattern</button>
      </div>
    </div>
  </div>

  <div id="canvas-wrapper">
    <canvas id="canvas"></canvas>
    <div class="empty-state visible" id="emptyState">
      <div class="empty-state-icon">üé®</div>
      <div class="empty-state-text">Click to upload your pattern</div>
      <div class="empty-state-subtext">or drag & drop a square tile here</div>
    </div>
  </div>

  <div id="controls">
    <div class="control-group">
      <label class="control-label">Repeat Type</label>
      <select id="repeatType">
        <option value="full">Full Drop</option>
        <option value="half-drop">Half Drop</option>
        <option value="brick">Brick</option>
      </select>
    </div>

<div class="control-group">
  <label class="control-label">View Mode</label>
  <select id="viewMode">
    <option value="tile">Infinite Tile</option>
    <option value="phone">Phone Case</option>
    <option value="fabric">Fabric Swatch</option>
    <option value="bottle">Water Bottle</option>
  </select>
</div>

<div class="control-group">
  <label class="control-label">Background</label>
  <select id="bgColor">
    <option value="checker">Transparent</option>
    <option value="#000000">Black</option>
    <option value="#ffffff">White</option>
  </select>
</div>

<div class="control-group">
  <label class="control-label">Grid</label>
  <button id="toggleGrid">Show Grid</button>
</div>

<div class="slider-group">
  <div class="slider-header">
    <label class="control-label">Scale</label>
    <span class="slider-value" id="scaleValue">1.0√ó</span>
  </div>
  <input type="range" id="patternScale" min="0.3" max="3" step="0.1" value="1">
</div>

<div class="slider-group">
  <div class="slider-header">
    <label class="control-label">Offset X</label>
    <span class="slider-value" id="offsetXValue">0%</span>
  </div>
  <input type="range" id="offsetX" min="0" max="100" value="0">
</div>

<div class="slider-group">
  <div class="slider-header">
    <label class="control-label">Offset Y</label>
    <span class="slider-value" id="offsetYValue">0%</span>
  </div>
  <input type="range" id="offsetY" min="0" max="100" value="0">
</div>

<div class="control-group">
  <label class="control-label">Export</label>
  <button class="primary" id="exportBtn">üíæ Export PNG</button>
</div>

  </div>

  <p class="helper-text">Wheel/Pinch to zoom ‚Ä¢ Drag to pan in tile mode</p>
</div>

<div id="footer">
  <div class="footer-content">
    <div class="footer-title">Turn your patterns into real products!</div>
    <div class="footer-links">
      <a href="https://www.spoonflower.com/" target="_blank">Spoonflower</a>
      <a href="https://www.printful.com/" target="_blank">Printful</a>
      <a href="https://printify.com/" target="_blank">Printify</a>
      <a href="https://society6.com/" target="_blank">Society6</a>
      <a href="https://www.redbubble.com/" target="_blank">Redbubble</a>
      <a href="https://www.zazzle.com/" target="_blank">Zazzle</a>
    </div>
    <div class="footer-credit">Created by Rudeboy‚Ñ¢</div>
  </div>
</div>

<script>
function roundRect(ctx,x,y,w,h,r){ctx.beginPath();ctx.moveTo(x+r,y);ctx.lineTo(x+w-r,y);ctx.arcTo(x+w,y,x+w,y+r,r);ctx.lineTo(x+w,y+h-r);ctx.arcTo(x+w,y+h,x+w-r,y+h,r);ctx.lineTo(x+r,y+h);ctx.arcTo(x,y+h,x,y+h-r,r);ctx.lineTo(x,y+r);ctx.arcTo(x,y,x+r,y,r);ctx.closePath()}
const canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d'),fileInput=document.getElementById('fileInput'),uploadBtnHeader=document.getElementById('uploadBtnHeader'),toggleGridBtn=document.getElementById('toggleGrid'),repeatSelect=document.getElementById('repeatType'),viewModeSelect=document.getElementById('viewMode'),bgColorSelect=document.getElementById('bgColor'),exportBtn=document.getElementById('exportBtn'),scaleSlider=document.getElementById('patternScale'),offsetXSlider=document.getElementById('offsetX'),offsetYSlider=document.getElementById('offsetY'),scaleValue=document.getElementById('scaleValue'),offsetXValue=document.getElementById('offsetXValue'),offsetYValue=document.getElementById('offsetYValue'),emptyState=document.getElementById('emptyState');
let tileImg=null,showGrid=false,repeatType='full',bgColor='checker',viewMode='tile',patternScale=1,offsetPercentX=0,offsetPercentY=0,panOffsetX=0,panOffsetY=0,zoomScale=1,isDragging=false,dragStartX,dragStartY;
const MIN_ZOOM=0.1,MAX_ZOOM=5;
function resize(){const w=document.getElementById('canvas-wrapper'),a=Math.min(w.clientWidth-64,800);canvas.width=a;canvas.height=a;updateBackground();draw()}
window.addEventListener('resize',resize);resize();
document.getElementById('logo').addEventListener('click',()=>location.reload());
canvas.addEventListener('click',e=>{if(!tileImg&&!isDragging)fileInput.click()});
uploadBtnHeader.addEventListener('click',()=>fileInput.click());
function updateBackground(){if(tileImg){canvas.style.background=bgColor==='checker'?'repeating-conic-gradient(#ccc 0% 25%, #999 0% 50%, #ccc 50% 75%, #999 75% 100%)':bgColor;canvas.style.backgroundSize='40px 40px'}else{canvas.style.background='repeating-conic-gradient(#2a2a2a 0% 25%, #1a1a1a 0% 50%, #2a2a2a 50% 75%, #1a1a1a 75% 100%)';canvas.style.backgroundSize='40px 40px'}}
function drawPattern(sx,sy,w,h,ts){const tx=Math.ceil(w/ts)+4,ty=Math.ceil(h/ts)+4;ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';for(let x=-2;x<tx;x++){for(let y=-2;y<ty;y++){let dx=sx+x*ts+offsetPercentX*ts,dy=sy+y*ts+offsetPercentY*ts;if(repeatType==='half-drop')dy+=(Math.abs(x)%2===1)?ts/2:0;else if(repeatType==='brick')dx+=(Math.abs(y)%2===1)?ts/2:0;ctx.drawImage(tileImg,dx,dy,ts,ts)}}}
function draw(){ctx.clearRect(0,0,canvas.width,canvas.height);if(!tileImg){emptyState.classList.add('visible');canvas.classList.remove('has-image');return}emptyState.classList.remove('visible');canvas.classList.add('has-image');const bts=tileImg.width,ets=bts*patternScale;ctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';ctx.save();if(viewMode==='tile'){ctx.translate(panOffsetX,panOffsetY);ctx.scale(zoomScale,zoomScale);const tx=Math.ceil(canvas.width/ets/zoomScale)+6,ty=Math.ceil(canvas.height/ets/zoomScale)+6,stx=Math.floor(-panOffsetX/(ets*zoomScale))-3,sty=Math.floor(-panOffsetY/(ets*zoomScale))-3;for(let x=stx;x<stx+tx;x++){for(let y=sty;y<sty+ty;y++){let dx=x*ets+offsetPercentX*ets,dy=y*ets+offsetPercentY*ets;if(repeatType==='half-drop')dy+=(Math.abs(x)%2===1)?ets/2:0;else if(repeatType==='brick')dx+=(Math.abs(y)%2===1)?ets/2:0;ctx.drawImage(tileImg,dx,dy,ets,ets)}}if(showGrid){ctx.strokeStyle='rgba(255,255,255,0.4)';ctx.lineWidth=1/zoomScale;for(let x=stx;x<stx+tx+1;x++){let lx=x*ets+offsetPercentX*ets;ctx.beginPath();ctx.moveTo(lx,sty*ets-ets);ctx.lineTo(lx,(sty+ty+1)*ets);ctx.stroke()}for(let y=sty;y<sty+ty+1;y++){let ly=y*ets+offsetPercentY*ets;ctx.beginPath();ctx.moveTo(stx*ets-ets,ly);ctx.lineTo((stx+tx+1)*ets,ly);ctx.stroke()}}}else{const cx=canvas.width/2,cy=canvas.height/2,ms=Math.min(canvas.width,canvas.height)*0.6;ctx.translate(cx,cy);if(viewMode==='phone'){const pw=ms*0.55,ph=pw*2.1,cs=pw*0.15,co=pw*0.15;ctx.save();roundRect(ctx,-pw/2,-ph/2,pw,ph,35);ctx.clip();drawPattern(-pw/2,-ph/2,pw,ph,ets);ctx.restore();roundRect(ctx,-pw/2,-ph/2,pw,ph,35);ctx.strokeStyle='#000';ctx.lineWidth=4;ctx.stroke();ctx.beginPath();ctx.arc(-pw/2+co+cs/2,-ph/2+co+cs/2,cs/2,0,Math.PI*2);ctx.fillStyle='#0a0a0a';ctx.fill();ctx.strokeStyle='#222';ctx.lineWidth=2;ctx.stroke()}else if(viewMode==='fabric'){const fw=ms*0.95,fh=fw*0.8;ctx.save();roundRect(ctx,-fw/2,-fh/2,fw,fh,15);ctx.fillStyle='#2a2a2a';ctx.fill();ctx.strokeStyle='#444';ctx.lineWidth=2;ctx.stroke();ctx.clip();drawPattern(-fw/2,-fh/2,fw,fh,ets);ctx.restore()}else if(viewMode==='bottle'){const bw=ms*0.45,bh=bw*2.3,ch=bh*0.12,nh=bh*0.08,bt=-bh/2+ch+nh,bh2=bh-ch-nh;ctx.save();roundRect(ctx,-bw/2,bt,bw,bh2,25);ctx.clip();drawPattern(-bw/2,bt,bw,bh2,ets);ctx.restore();roundRect(ctx,-bw/2,bt,bw,bh2,25);ctx.strokeStyle='#000';ctx.lineWidth=3;ctx.stroke();ctx.save();roundRect(ctx,-bw/2,bt,bw,bh2,25);ctx.clip();const g=ctx.createLinearGradient(-bw/2,0,bw/2,0);g.addColorStop(0,'rgba(255,255,255,0)');g.addColorStop(0.3,'rgba(255,255,255,0.15)');g.addColorStop(0.5,'rgba(255,255,255,0.25)');g.addColorStop(0.7,'rgba(255,255,255,0.15)');g.addColorStop(1,'rgba(255,255,255,0)');ctx.fillStyle=g;ctx.fillRect(-bw/2,bt,bw,bh2);ctx.restore();const nw=bw*0.6;ctx.fillStyle='#e8e8e8';roundRect(ctx,-nw/2,-bh/2+ch,nw,nh,8);ctx.fill();ctx.strokeStyle='#000';ctx.lineWidth=2;ctx.stroke();const cw=bw*0.65;ctx.fillStyle='#2a2a2a';roundRect(ctx,-cw/2,-bh/2,cw,ch,6);ctx.fill();ctx.strokeStyle='#000';ctx.lineWidth=2;ctx.stroke();ctx.strokeStyle='#444';ctx.lineWidth=1;for(let i=0;i<4;i++){const y=-bh/2+(ch/5)*(i+1);ctx.beginPath();ctx.moveTo(-cw/2+2,y);ctx.lineTo(cw/2-2,y);ctx.stroke()}ctx.beginPath();ctx.ellipse(0,-bh/2+3,cw*0.45,cw*0.12,0,0,Math.PI*2);ctx.fillStyle='#1a1a1a';ctx.fill();ctx.strokeStyle='#000';ctx.lineWidth=2;ctx.stroke();ctx.beginPath();ctx.ellipse(0,bt+bh2-5,bw*0.48,bw*0.08,0,0,Math.PI);ctx.fillStyle='#333';ctx.fill();ctx.strokeStyle='#000';ctx.lineWidth=2;ctx.stroke()}}ctx.restore()}
function loadImage(f){if(!f)return;const r=new FileReader();r.onload=e=>{tileImg=new Image();tileImg.onload=()=>{updateBackground();draw()};tileImg.src=e.target.result};r.readAsDataURL(f)}
fileInput.addEventListener('change',e=>loadImage(e.target.files[0]));
canvas.addEventListener('dragover',e=>{e.preventDefault();canvas.style.opacity='0.7'});
canvas.addEventListener('dragleave',()=>{canvas.style.opacity='1'});
canvas.addEventListener('drop',e=>{e.preventDefault();canvas.style.opacity='1';loadImage(e.dataTransfer.files[0])});
canvas.addEventListener('pointerdown',e=>{if(!tileImg||viewMode!=='tile')return;isDragging=true;dragStartX=e.clientX-panOffsetX;dragStartY=e.clientY-panOffsetY;canvas.setPointerCapture(e.pointerId)});
canvas.addEventListener('pointermove',e=>{if(!isDragging||viewMode!=='tile')return;panOffsetX=e.clientX-dragStartX;panOffsetY=e.clientY-dragStartY;draw()});
canvas.addEventListener('pointerup',()=>isDragging=false);
canvas.addEventListener('pointerleave',()=>isDragging=false);
canvas.addEventListener('wheel',e=>{if(viewMode!=='tile'||!tileImg)return;e.preventDefault();const zf=e.deltaY<0?1.1:0.9,r=canvas.getBoundingClientRect(),mx=e.clientX-r.left,my=e.clientY-r.top;let ns=zoomScale*zf;ns=Math.max(MIN_ZOOM,Math.min(MAX_ZOOM,ns));const sc=ns-zoomScale;panOffsetX-=(mx-panOffsetX)*(sc/zoomScale);panOffsetY-=(my-panOffsetY)*(sc/zoomScale);zoomScale=ns;draw()},{passive:false});
let ltd=0;
canvas.addEventListener('touchstart',e=>{if(e.touches.length===2&&viewMode==='tile'&&tileImg){e.preventDefault();const t1=e.touches[0],t2=e.touches[1];ltd=Math.hypot(t2.clientX-t1.clientX,t2.clientY-t1.clientY)}},{passive:false});
canvas.addEventListener('touchmove',e=>{if(e.touches.length===2&&viewMode==='tile'&&tileImg){e.preventDefault();const t1=e.touches[0],t2=e.touches[1],cd=Math.hypot(t2.clientX-t1.clientX,t2.clientY-t1.clientY);if(ltd>0){const zf=cd/ltd,r=canvas.getBoundingClientRect(),cx=((t1.clientX+t2.clientX)/2)-r.left,cy=((t1.clientY+t2.clientY)/2)-r.top;let ns=zoomScale*zf;ns=Math.max(MIN_ZOOM,Math.min(MAX_ZOOM,ns));const sc=ns-zoomScale;panOffsetX-=(cx-panOffsetX)*(sc/zoomScale);panOffsetY-=(cy-panOffsetY)*(sc/zoomScale);zoomScale=ns;draw()}ltd=cd}},{passive:false});
canvas.addEventListener('touchend',()=>ltd=0);
repeatSelect.addEventListener('change',e=>{repeatType=e.target.value;draw()});
viewModeSelect.addEventListener('change',e=>{viewMode=e.target.value;draw()});
bgColorSelect.addEventListener('change',e=>{bgColor=e.target.value;updateBackground();draw()});
toggleGridBtn.addEventListener('click',()=>{showGrid=!showGrid;toggleGridBtn.textContent=showGrid?'Hide Grid':'Show Grid';draw()});
scaleSlider.addEventListener('input',e=>{patternScale=parseFloat(e.target.value);scaleValue.textContent=patternScale.toFixed(1)+'√ó';draw()});
offsetXSlider.addEventListener('input',e=>{offsetPercentX=e.target.value/100;offsetXValue.textContent=e.target.value+'%';draw()});
offsetYSlider.addEventListener('input',e=>{offsetPercentY=e.target.value/100;offsetYValue.textContent=e.target.value+'%';draw()});
exportBtn.addEventListener('click',()=>{if(!tileImg){alert('Please load a pattern first!');return}try{const l=document.createElement('a');l.download='rud3boy-pattern.png';l.href=canvas.toDataURL('image/png');l.click()}catch(e){console.error('Export failed:',e);alert('Export failed. Please try again or take a screenshot.')}});
draw();
</script>

</body>
</html>